/*! startpage by gandalfx */
Array.prototype.shuffle||(Array.prototype.shuffle=function(){var a=[];return this.forEach(function(b,c){var d=Math.floor(Math.random()*c);a[c]=a[d],a[d]=b}),a}),function(a,b,c){"use strict";function d(a){var b,c={};return a.split("\n").map(e).forEach(function(a,d){if(a){var e;if(e=a.match(/^(\S+)\s*=\s*(.*)$/))c[e[1]]=JSON.parse(e[2]);else if(e=a.match(/^\[(\S+)\]$/))b=e[1],c.hasOwnProperty(b)||(c[b]=[]);else{if(!b)throw"Config: Syntax error on line "+(d+1);var f=a.split(/\s+/);c[b].push(f.length>1?f:f[0])}}}),c}function e(a){var b=a.indexOf("#");return(b>=0?a.slice(0,b):a).trim()}var f={},g={};a.config=f,f.reset=function(){c.clear(),window.location.reload(!0)},f.require=function(a,b,e){if(e||(e=b,b=!1),g.hasOwnProperty(a))e(g[a]);else if(c.hasOwnProperty(a))e(g[a]=JSON.parse(c[a]));else{console.log("loading '"+a+"'");var h=new XMLHttpRequest;h.open("GET",a),h.addEventListener("load",function(){if(b)var f=b(h.responseText);else var f=d(h.responseText);g[a]=f,c[a]=JSON.stringify(f),e(f)}),h.responseType="text",h.send()}return f},f.store=function(a,b,d){g[a][b]=d,c[a]=JSON.stringify(g[a])}}(window,document,window.localStorage),function(a){"use strict";var b=a.getElementById("settings"),c={};window.settingsMenu=b,b.add=function(d,e,f){c.hasOwnProperty(e)||(c[e]=b.appendChild(a.createElement("div")),c[e].className=e);var g=c[e].appendChild(a.createElement("a"));g.innerHTML=d,g.addEventListener("click",f)},b.add("reset","reset",config.reset)}(document),function(a,b){"use strict";function c(b){f=b.engines.map(function(a){return{name:a[0],param:a[1],url:a[2]}}),e(),a.addEventListener("click",function(){g.focus()},!1)}function d(c){var d=g.value.trim(),e=/^((https?)|(ftp)):\/\//i,h=/^(([a-z0-9-]+\.)+((de)|(com)|(org)|(net)|(me)|(info)|(im)|(fr)|(co\.uk)|(io)|(cc)))(\/.*)?$/i,i=/^r\/\w+$/;return e.test(d)?(a.location.replace(d),!1):h.test(d)?(a.location.replace("http://"+d),!1):i.test(d)?(a.location.replace("http://www.reddit.com/"+d),!1):(b.getElementById("search").setAttribute("action",f[c].url),g.setAttribute("name",f[c].param),!0)}function e(){for(var a,c=0;c<f.length;c++)a=b.createElement("button"),a.innerHTML=f[c].name,a.setAttribute("formaction",f[c].url),function(b){a.addEventListener("click",function(a){d(b)||a.preventDefault()},!1)}(c),h.appendChild(a)}var f,g=b.getElementById("searchInput"),h=b.getElementById("searchButtons");config.require("search.conf",c)}(window,document),function(a){"use strict";config.require("menus.conf",function(b){for(var c in b)if(b.hasOwnProperty(c)){var d=a.getElementById(c);b[c].forEach(function(b){var c=d.appendChild(a.createElement("a"));c.innerHTML=b[0],c.setAttribute("href",b[1])})}})}(document),function(a,b,c){"use strict";var d={},e=["","white"];a.style=d,d.set=function(a){var b=e.indexOf(a);return b>-1&&(c.dataset.styleId=b,c.className=a),d},d.cycle=function(){return c.className=e[++c.dataset.styleId%e.length],d},c.dataset.styleId=0,c.className=e[0],settingsMenu.add("toggle style","style",d.cycle)}(window,document,document.body),function(a){"use strict";function b(a){s=a.collections,m=a.hasOwnProperty("shuffle")&&a.shuffle,d(a.hasOwnProperty("active_collection")&&s.hasOwnProperty(a.active_collection)?a.active_collection:Object.getOwnPropertyNames(s)[0]),Object.getOwnPropertyNames(s).forEach(function(a){settingsMenu.add(a,"collections",function(){d(a)})}),g()}function c(a){var b,c={collections:{}};return a.split("\n").forEach(function(a){if(a&&"#"!==a[0]){var d;if(d=a.match(/^(\S+)\s*=\s*(.*)$/))c[d[1]]=JSON.parse(d[2]);else if(d=a.match(/^\[collection_(\w+)\]$/))b=d[1],c.collections.hasOwnProperty(b)||(c.collections[b]=[]);else{if(!b)throw"Config: Syntax error on line "+(lineNum+1);var e=a.split(/\s+/);c.collections[b].push({src:e[0],style:e.length>1?e[1]:""})}}}),Object.getOwnPropertyNames(c.collections).forEach(function(a){if(c.hasOwnProperty("prefix_collection_"+a)){var b=c["prefix_collection_"+a];c.collections[a].map(function(a){a.src=b+a.src})}}),c}function d(b){l=0,p.innerHTML="",k=[],j=m?s[b].shuffle():s[b],j.forEach(function(b,c){k[c]=a.createElement("a"),k[c].addEventListener("click",function(){f(c)},!1),p.appendChild(a.createElement("li")).appendChild(k[c])}),f(m?0:Math.floor(Math.random()*j.length)),config.store(i,"active_collection",b)}function e(a){+a||(a=1);var b=j.length;f((l+a+b)%b)}function f(a){o.setAttribute("src",j[a].src),o.setAttribute("title","#"+a+"     "+j[a].src),style.set(j[a].style),k[l].className="",k[a].className="active",g(),r.src=j[(a+1)%j.length].src,l=a}function g(){var a,b,c=n.offsetHeight,d=n.offsetWidth,e=q.offsetHeight,f=q.offsetWidth,g=o.height,i=(o.width,o.height/o.width),j=0;(d-f-150)*i>Math.min(g,c-e-150)?(n.className="horizontalLayout",a=c-100,b=d-f-150):(n.className="verticalLayout",a=c-e-150,b=d-100,j=(c-e-Math.min(g,a)-h)/2),o.style.maxHeight=Math.floor(a)+"px",o.style.maxWidth=Math.floor(b)+"px",q.style.marginTop=Math.floor(j)+"px"}const h=50,i="pictures.conf";var j,k,l,m,n=a.getElementById("main"),o=a.getElementById("myImage"),p=a.getElementById("imgNavigation"),q=a.getElementById("search"),r=new Image,s={};config.require(i,c,b),o.addEventListener("load",g,!1),window.addEventListener("resize",g,!1),o.addEventListener("click",e,!1),o.addEventListener("DOMMouseScroll",function(a){e(a.detail<0?1:-1)},!1),p.addEventListener("DOMMouseScroll",function(a){e(a.detail<0?1:-1)},!1)}(document);