/*! startpage by gandalfx */
function Core(){function a(){localStorage.length?c={}:b(),d.addSettingsButton("reset","reset",d.resetConfig)}function b(){c=config;for(var a in c)localStorage[a]=JSON.stringify(c[a])}var c,d=this,e=document.getElementById("settings"),f="";this.getConfig=function(a){return a in c||(c[a]=JSON.parse(localStorage[a])),c[a]},this.setConfig=function(a,b){c[a]=b,localStorage[a]=JSON.stringify(b)},this.resetConfig=function(){localStorage.clear(),window.location.reload(!0)},this.modLoad=function(a,b){var c=document.createElement("script");document.head.appendChild(c),c.src=a+".js",c.className="mod-"+a,null!==b&&c.addEventListener("load",b,!1)},this.styleLoad=function(a){var b=document.createElement("link");b.rel="stylesheet",b.href=a+".css",document.head.appendChild(b)},this.addSettingsButton=function(a,b,c){var d=document.createElement("a");d.innerHTML=a,e.appendChild(d),d.addEventListener("click",c,!1),b!=f&&(f=b,b+=" first-of-class"),d.className=b},a()}function Style(){var a=this,b=["","white"];this.set=function(c){var d=b.indexOf(c);return d>-1&&(document.body.dataset.styleId=d,document.body.className=c),a},this.cycle=function(){return document.body.className=b[++document.body.dataset.styleId%b.length],a},document.body.dataset.styleId=0,document.body.className=b[0],core.addSettingsButton("style","style",a.cycle)}function SearchBox(){function a(){c(),window.addEventListener("click",function(){d.focus()},!1)}function b(a){var b=d.value.trim(),c=/^((https?)|(ftp)):\/\//i,e=/^(([a-z0-9-]+\.)+((de)|(com)|(org)|(net)|(me)|(info)|(im)|(fr)|(co\.uk)|(io)|(cc)))(\/.*)?$/i,g=/^r\/\w+$/;return c.test(b)?(window.location.replace(b),!1):e.test(b)?(window.location.replace("http://"+b),!1):g.test(b)?(window.location.replace("http://www.reddit.com/"+b),!1):(document.getElementById("search").setAttribute("action",f[a].url),d.setAttribute("name",f[a].param),!0)}function c(){for(var a,c=0;c<f.length;c++)a=document.createElement("button"),a.innerHTML=f[c].name,a.setAttribute("formaction",f[c].url),function(c){a.addEventListener("click",function(a){b(c)||a.preventDefault()},!1)}(c),e.appendChild(a)}var d=document.getElementById("searchInput"),e=document.getElementById("searchButtons"),f=core.getConfig("engines");a()}function Menu(a){function b(){for(var a,b=0;b<e.length;b++)a=document.createElement("a"),a.innerHTML=e[b].name,a.setAttribute("href",e[b].url),c.appendChild(a);d.setAttribute("href",e[0].url)}var c=document.getElementById(a),d=document.getElementById("logo"),e=core.getConfig(a);b()}function PictureBox(){function a(){for(var a=0;a<k.length;a++)k[a].active&&b(a),function(a){core.addSettingsButton(k[a].name,"collection",function(){b(a)})}(a);h.addEventListener("load",d,!1),window.addEventListener("resize",d,!1),h.addEventListener("click",e.cycleImage,!1),h.addEventListener("DOMMouseScroll",function(a){e.cycleImage(a.detail<0?1:-1)},!1),i.addEventListener("DOMMouseScroll",function(a){e.cycleImage(a.detail<0?1:-1)},!1),d()}function b(a){l=core.getConfig("pictures_"+k[a].name),i.innerHTML="";for(var b=0;b<l.length;b++)m[b]=document.createElement("a"),function(a){m[a].addEventListener("click",function(){c(a)},!1)}(b),i.appendChild(document.createElement("li")).appendChild(m[b]);c(Math.floor(Math.random()*l.length));for(var b=0;b<k.length;b++)k[b].active=b===a;core.setConfig("collections",k)}function c(a){h.setAttribute("src",l[a].src),h.setAttribute("title","#"+a+"     "+l[a].src),style.set(l[a].style),m[n].className="",m[a].className="active",d(),o.src=l[(a+1)%l.length].src,n=a}function d(){var a,b,c=g.offsetHeight,d=g.offsetWidth,e=j.offsetHeight,i=j.offsetWidth,k=h.height,l=(h.width,h.height/h.width),m=0;(d-i-3*f)*l>Math.min(k,c-e-3*f)?(g.className="horizontalLayout",a=c-2*f,b=d-i-3*f):(g.className="verticalLayout",a=c-e-3*f,b=d-2*f,m=(c-e-Math.min(k,a)-f)/2),h.style.maxHeight=Math.floor(a)+"px",h.style.maxWidth=Math.floor(b)+"px",j.style.marginTop=Math.floor(m)+"px"}var e=this,f=50,g=document.getElementById("main"),h=document.getElementById("myImage"),i=document.getElementById("imgNavigation"),j=document.getElementById("search"),k=core.getConfig("collections"),l=[],m=[],n=0,o=new Image;this.cycleImage=function(a){isNaN(a)&&(a=1),c((n+a+l.length)%l.length)},a()}if(!localStorage.length){var configScript=document.createElement("script");configScript.src="config.js",document.head.appendChild(configScript)}var core,style;window.addEventListener("load",function(){core=new Core,style=new Style,new SearchBox,new PictureBox,new Menu("links")},!1);